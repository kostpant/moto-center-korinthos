<!DOCTYPE html>
<html lang="el">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Showroom | MOTO CENTER - ΕΥΜΟΡΦΙΑΔΗΣ ΙΩΑΝΝΗΣ</title>
  <meta name="description"
    content="Ανακαλύψτε τη συλλογή μας από καινούριες και μεταχειρισμένες μοτοσυκλέτες SYM, DAYTONA, KAWASAKI. Δείτε τιμές και τεχνικά χαρακτηριστικά.">

  <!-- Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link
    href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:ital,wght@0,300;0,400;0,500;0,600;0,700;1,300;1,400&family=Inter:wght@200;300;400;500;600&display=swap"
    rel="stylesheet">

  <!-- Styles -->
  <link rel="stylesheet" href="styles/main.css">
  <link rel="stylesheet" href="styles/layout.css">
  <link rel="stylesheet" href="styles/components.css">
  <link rel="stylesheet" href="styles/animations.css">
  <link rel="stylesheet" href="styles/romans-components.css">
  <link rel="stylesheet" href="styles/romans-exact.css">
  <link rel="stylesheet" href="styles/hero-typography.css">

  <style>
    /* Stock Page Layout - Exact Romans Match */
    .stock-page {
      background: #ffffff;
      min-height: 100vh;
      padding-top: 88px;
    }

    .stock-page-header {
      background: #ffffff;
      padding: 48px 40px 32px;
      border-bottom: 1px solid #e5e5e5;
      max-width: 1500px;
      margin: 0 auto;
    }

    .stock-page-title {
      font-family: 'Cormorant Garamond', serif;
      font-size: 2rem;
      font-weight: 400;
      letter-spacing: 0.35em;
      text-transform: uppercase;
      color: #111111;
      margin: 0 0 8px 0;
    }

    .stock-page-sub {
      font-family: 'Inter', sans-serif;
      font-size: 0.72rem;
      font-weight: 300;
      color: #888888;
      letter-spacing: 0.1em;
      margin: 0;
    }

    .stock-layout {
      display: flex;
      max-width: 1500px;
      margin: 0 auto;
      padding: 0 40px;
    }

    /* Sidebar */
    .sidebar {
      position: sticky;
      top: 108px;
      width: 260px;
      flex-shrink: 0;
      padding: 24px 28px 24px 0;
      border-right: 1px solid #e5e5e5;
      align-self: start;
      min-height: 400px;
    }

    .sidebar__stockbtn {
      display: flex;
      align-items: center;
      justify-content: center;
      width: 100%;
      padding: 0.85rem 1rem;
      border: 1px solid #111111;
      background: transparent;
      color: #111111;
      font-family: 'Inter', sans-serif;
      font-size: 0.62rem;
      font-weight: 600;
      letter-spacing: 0.18em;
      text-transform: uppercase;
      cursor: pointer;
      margin-bottom: 32px;
      transition: all 0.25s ease;
      border-radius: 0;
    }

    .sidebar__stockbtn:hover {
      background: #111111;
      color: #ffffff;
    }

    .sidebar__section {
      margin-bottom: 28px;
    }

    .sidebar__heading {
      font-family: 'Inter', sans-serif;
      font-size: 0.6rem;
      font-weight: 700;
      letter-spacing: 0.2em;
      text-transform: uppercase;
      color: #111111;
      margin: 0 0 12px 0;
      padding-bottom: 8px;
      border-bottom: 1px solid #e5e5e5;
    }

    .sidebar__links {
      display: flex;
      flex-direction: column;
      gap: 2px;
    }

    .sidebar__link {
      font-family: 'Inter', sans-serif;
      font-size: 0.75rem;
      font-weight: 400;
      color: #555555;
      text-decoration: none;
      padding: 5px 0;
      transition: color 0.2s ease;
      cursor: pointer;
      display: block;
      background: none;
      border: none;
      text-align: left;
      width: 100%;
    }

    .sidebar__link:hover {
      color: #111111;
    }

    .sidebar__link.active {
      color: #111111;
      font-weight: 600;
    }

    /* Sidebar mini card */
    .sidebar__mini {
      margin-bottom: 16px;
      text-decoration: none;
      display: block;
    }

    .sidebar__mini-img {
      width: 100%;
      aspect-ratio: 4/3;
      object-fit: cover;
      background: #f0f0f0;
      display: block;
    }

    .sidebar__mini-title {
      font-family: 'Inter', sans-serif;
      font-size: 0.6rem;
      font-weight: 600;
      letter-spacing: 0.05em;
      text-transform: uppercase;
      color: #111111;
      margin: 8px 0 2px;
      line-height: 1.4;
    }

    .sidebar__mini-price {
      font-family: 'Inter', sans-serif;
      font-size: 0.65rem;
      font-weight: 400;
      color: #666666;
    }

    /* Main Content */
    .stock-main {
      flex: 1;
      padding: 24px 0 60px 40px;
    }

    .stock-toolbar {
      display: flex;
      align-items: center;
      justify-content: flex-end;
      margin-bottom: 0;
      padding-bottom: 12px;
      border-bottom: 1px solid #e5e5e5;
      gap: 12px;
    }

    .stock-count {
      font-family: 'Inter', sans-serif;
      font-size: 0.68rem;
      font-weight: 300;
      color: #888888;
      letter-spacing: 0.05em;
      margin-right: auto;
    }

    .view-btn {
      background: transparent;
      border: 1px solid #e5e5e5;
      padding: 6px 8px;
      cursor: pointer;
      color: #999999;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: all 0.2s ease;
      border-radius: 0;
    }

    .view-btn.active {
      background: #111111;
      border-color: #111111;
      color: #ffffff;
    }

    .view-btn:hover:not(.active) {
      border-color: #111111;
      color: #111111;
    }

    /* Listing Rows */
    .listings-list {
      display: flex;
      flex-direction: column;
    }

    .listing-row {
      display: grid;
      grid-template-columns: 380px 1fr;
      gap: 0;
      padding: 32px 0;
      align-items: start;
    }

    .listing-row__img-wrap {
      display: block;
      overflow: hidden;
      background: #f5f5f5;
      aspect-ratio: 4/3;
      flex-shrink: 0;
    }

    .listing-row__img {
      width: 100%;
      height: 100%;
      object-fit: cover;
      display: block;
      transition: transform 0.5s ease;
    }

    .listing-row:hover .listing-row__img {
      transform: scale(1.03);
    }

    .listing-row__body {
      padding: 0 0 0 40px;
      display: flex;
      flex-direction: column;
      height: 100%;
    }

    .listing-row__header {
      display: flex;
      align-items: flex-start;
      justify-content: space-between;
      gap: 16px;
      margin-bottom: 12px;
    }

    .listing-row__title {
      font-family: 'Inter', sans-serif;
      font-size: 0.8rem;
      font-weight: 600;
      letter-spacing: 0.08em;
      text-transform: uppercase;
      color: #111111;
      line-height: 1.4;
      margin: 0;
      flex: 1;
    }

    .listing-row__price {
      font-family: 'Inter', sans-serif;
      font-size: 0.9rem;
      font-weight: 600;
      color: #111111;
      white-space: nowrap;
      flex-shrink: 0;
    }

    .listing-row__divider {
      width: 100%;
      height: 1px;
      background: #e5e5e5;
      margin-bottom: 20px;
    }

    .listing-row__specs {
      flex: 1;
      display: flex;
      flex-direction: column;
      gap: 0;
    }

    .listing-row__spec {
      display: flex;
      align-items: baseline;
      padding: 6px 0;
      gap: 0;
    }

    .listing-row__spec-label {
      font-family: 'Inter', sans-serif;
      font-size: 0.625rem;
      font-weight: 700;
      letter-spacing: 0.1em;
      text-transform: uppercase;
      color: #111111;
      min-width: 110px;
      flex-shrink: 0;
    }

    .listing-row__spec-value {
      font-family: 'Inter', sans-serif;
      font-size: 0.75rem;
      font-weight: 400;
      color: #555555;
    }

    .listing-row__footer {
      margin-top: 24px;
      display: flex;
      justify-content: flex-end;
    }

    .listing-row__cta {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      padding: 0 2.5rem;
      height: 48px;
      background: #111111;
      color: #ffffff;
      font-family: 'Inter', sans-serif;
      font-size: 0.65rem;
      font-weight: 500;
      letter-spacing: 0.18em;
      text-transform: uppercase;
      text-decoration: none;
      border: none;
      border-radius: 0;
      transition: background 0.25s ease;
      cursor: pointer;
      white-space: nowrap;
    }

    .listing-row__cta:hover {
      background: #333333;
    }

    .listing-row__separator {
      width: 100%;
      height: 1px;
      background: #e5e5e5;
    }

    .listing-row__separator:last-child {
      display: none;
    }

    /* No Results */
    .no-results {
      padding: 80px 0;
      text-align: center;
      font-family: 'Inter', sans-serif;
      font-size: 0.8rem;
      letter-spacing: 0.1em;
      color: #888888;
      text-transform: uppercase;
    }

    /* Grid View */
    .listings-list.grid-view {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 28px;
      padding-top: 24px;
    }

    .listings-list.grid-view .listing-row {
      grid-template-columns: 1fr;
      gap: 0;
      padding: 0;
    }

    .listings-list.grid-view .listing-row__body {
      padding: 12px 0 0 0;
    }

    .listings-list.grid-view .listing-row__footer {
      justify-content: stretch;
    }

    .listings-list.grid-view .listing-row__cta {
      width: 100%;
    }

    .listings-list.grid-view .listing-row__separator {
      display: none;
    }

    /* Responsive */
    @media (max-width: 1024px) {
      .stock-layout {
        flex-direction: column;
        padding: 0 20px;
      }

      .sidebar {
        position: static;
        width: 100%;
        border-right: none;
        border-bottom: 1px solid #e5e5e5;
        padding: 20px 0;
        min-height: auto;
      }

      .stock-main {
        padding: 20px 0;
      }

      .listing-row {
        grid-template-columns: 260px 1fr;
      }

      .listings-list.grid-view {
        grid-template-columns: repeat(2, 1fr);
      }
    }

    @media (max-width: 768px) {
      .listing-row {
        grid-template-columns: 1fr;
      }

      .listing-row__body {
        padding: 16px 0 0 0;
      }

      .listing-row__footer {
        justify-content: stretch;
      }

      .listing-row__cta {
        width: 100%;
      }

      .listings-list.grid-view {
        grid-template-columns: 1fr;
      }

      .stock-page-header {
        padding: 32px 20px 24px;
      }

      .stock-page-title {
        font-size: 1.5rem;
        letter-spacing: 0.2em;
      }
    }
  </style>
</head>

<body>
  <!-- Navigation -->
  <header class="navbar" id="navbar">
    <div class="navbar__inner">
      <nav class="navbar__left">
        <a href="index.html" class="navbar__link">HOME</a>
        <a href="bikes.html" class="navbar__link active">SHOWROOM</a>
      </nav>
      <a href="index.html" class="navbar__logo">
        <span class="logo-main">MOTO CENTER</span>
        <span class="logo-sub">ΕΥΜΟΡΦΙΑΔΗΣ</span>
      </a>
      <nav class="navbar__right">
        <a href="services.html" class="navbar__link">ΥΠΗΡΕΣΙΕΣ</a>
        <a href="contact.html" class="navbar__link">ΕΠΙΚΟΙΝΩΝΙΑ</a>
        <a href="tel:2741083014" class="navbar__phone-icon">
          <svg width="17" height="17" viewBox="0 0 24 24" fill="currentColor">
            <path
              d="M6.6 10.8c1.4 2.8 3.8 5.1 6.6 6.6l2.2-2.2 c.3-.3.7-.4 1-.2 1.1.4 2.3.6 3.6.6.6 0 1 .4 1 1V20 c0 .6-.4 1-1 1-9.4 0-17-7.6-17-17 0-.6.4-1 1-1h3.5 c.6 0 1 .4 1 1 0 1.3.2 2.5.6 3.6.1.3 0 .7-.2 1L6.6 10.8z" />
          </svg>
        </a>
      </nav>
      <button class="navbar__hamburger" id="navbarToggle" aria-label="Toggle menu">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div class="navbar__mobile" id="navbarMobile">
      <a href="index.html" class="navbar__link">HOME</a>
      <a href="bikes.html" class="navbar__link active">SHOWROOM</a>
      <a href="services.html" class="navbar__link">ΥΠΗΡΕΣΙΕΣ</a>
      <a href="contact.html" class="navbar__link">ΕΠΙΚΟΙΝΩΝΙΑ</a>
    </div>
  </header>

  <!-- Page Title Section -->
  <div class="stock-page-header">
    <h1 class="stock-page-title">SHOWROOM</h1>
    <p class="stock-page-sub">Όλα τα διαθέσιμα οχήματά μας</p>
  </div>

  <!-- Main Layout: Sidebar + Listings -->
  <div class="stock-page">
    <div class="stock-layout">

      <!-- LEFT SIDEBAR -->
      <aside class="sidebar" id="sidebar">

        <button class="sidebar__stockbtn" id="clearFilters">
          VIEW FULL STOCK LIST
        </button>

        <div class="sidebar__section">
          <h3 class="sidebar__heading">SEARCH BY MANUFACTURER</h3>
          <div class="sidebar__links">
            <button class="sidebar__link" data-filter="brand" data-value="SYM">SYM</button>
            <button class="sidebar__link" data-filter="brand" data-value="DAYTONA">DAYTONA</button>
            <button class="sidebar__link" data-filter="brand" data-value="KAWASAKI">KAWASAKI</button>
            <button class="sidebar__link" data-filter="brand" data-value="MODENAS">MODENAS</button>
            <button class="sidebar__link" data-filter="brand" data-value="QUADRO">QUADRO</button>
          </div>
        </div>

        <div class="sidebar__section">
          <h3 class="sidebar__heading">SEARCH BY CATEGORY</h3>
          <div class="sidebar__links">
            <button class="sidebar__link" data-filter="category" data-value="Μοτοσυκλέτα">Μοτοσυκλέτα</button>
            <button class="sidebar__link" data-filter="category" data-value="Scooter">Scooter</button>
            <button class="sidebar__link" data-filter="category" data-value="Maxi-Scooter">Maxi-Scooter</button>
            <button class="sidebar__link" data-filter="category" data-value="ATV">ATV / Quad</button>
            <button class="sidebar__link" data-filter="category" data-value="Αυτοκίνητο">Αυτοκίνητο</button>
          </div>
        </div>

        <div class="sidebar__section">
          <h3 class="sidebar__heading">LATEST ARRIVALS</h3>
          <div id="sidebarLatest"></div>
        </div>

      </aside>

      <!-- RIGHT MAIN CONTENT -->
      <div class="stock-main">

        <!-- Toolbar with view toggle -->
        <div class="stock-toolbar">
          <span class="stock-count" id="stockCount">-- οχήματα διαθέσιμα</span>
          <div class="stock-view-toggle">
            <button class="view-btn view-btn--list active" id="viewList" aria-label="List view">
              <svg width="18" height="18" viewBox="0 0 24 24" fill="currentColor">
                <rect x="3" y="5" width="18" height="2" />
                <rect x="3" y="11" width="18" height="2" />
                <rect x="3" y="17" width="18" height="2" />
              </svg>
            </button>
            <button class="view-btn view-btn--grid" id="viewGrid" aria-label="Grid view">
              <svg width="18" height="18" viewBox="0 0 24 24" fill="currentColor">
                <rect x="3" y="3" width="8" height="8" />
                <rect x="13" y="3" width="8" height="8" />
                <rect x="3" y="13" width="8" height="8" />
                <rect x="13" y="13" width="8" height="8" />
              </svg>
            </button>
          </div>
        </div>

        <!-- Listings container -->
        <div class="listings-list" id="listingsContainer">
          <!-- JS renders listing rows here -->
        </div>

      </div>

    </div>
  </div>

  <!-- Newsletter Strip -->
  <section class="newsletter-strip">
    <div class="newsletter-strip__inner">
      <div class="newsletter-strip__content">
        <h3 class="newsletter-strip__title">Μείνετε Ενημερωμένοι</h3>
        <p class="newsletter-strip__subtitle">Εγγραφείτε για να λαμβάνετε νέα και προσφορές</p>
      </div>
      <form class="newsletter-strip__form" onsubmit="event.preventDefault(); alert('Ευχαριστούμε για την εγγραφή!');">
        <input type="email" class="newsletter-strip__input" placeholder="ΤΟ EMAIL ΣΑΣ" required>
        <button type="submit" class="newsletter-strip__btn">ΕΓΓΡΑΦΗ</button>
      </form>
    </div>
  </section>

  <!-- Footer -->
  <footer class="romans-footer">
    <div class="romans-footer__inner">
      <div class="romans-footer__logo">
        <span class="romans-footer__logo-main">MOTO CENTER</span>
        <span class="romans-footer__logo-sub">ΕΥΜΟΡΦΙΑΔΗΣ</span>
      </div>
      <p class="romans-footer__address">ΛΕΩΦ. ΙΩΝΙΑΣ & Μ. ΜΠΟΤΣΑΡΗ 26, ΚΟΡΙΝΘΟΣ 20100</p>
      <div class="romans-footer__social">
        <a href="#" class="romans-footer__social-link" aria-label="Facebook">
          <svg viewBox="0 0 24 24" fill="currentColor">
            <path
              d="M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z" />
          </svg>
        </a>
        <a href="#" class="romans-footer__social-link" aria-label="Instagram">
          <svg viewBox="0 0 24 24" fill="currentColor">
            <path
              d="M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zm0-2.163c-3.259 0-3.667.014-4.947.072-4.358.2-6.78 2.618-6.98 6.98-.059 1.281-.073 1.689-.073 4.948 0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98 1.281.058 1.689.072 4.948.072 3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98-1.281-.059-1.69-.073-4.949-.073z" />
          </svg>
        </a>
        <a href="tel:2741083014" class="romans-footer__social-link" aria-label="Phone">
          <svg viewBox="0 0 24 24" fill="currentColor">
            <path
              d="M6.6 10.8c1.4 2.8 3.8 5.1 6.6 6.6l2.2-2.2c.3-.3.7-.4 1-.2 1.1.4 2.3.6 3.6.6.6 0 1 .4 1 1V20c0 .6-.4 1-1 1-9.4 0-17-7.6-17-17 0-.6.4-1 1-1h3.5c.6 0 1 .4 1 1 0 1.3.2 2.5.6 3.6.1.3 0 .7-.2 1L6.6 10.8z" />
          </svg>
        </a>
      </div>
      <a href="tel:2741083014" class="romans-footer__phone">27410 83014</a>
      <p class="romans-footer__legal">Εξουσιοδοτημένος αντιπρόσωπος SYM · DAYTONA · KAWASAKI · MODENAS · QUADRO στην
        Κορινθία.</p>
    </div>
    <div class="romans-footer__bottom">
      <span class="romans-footer__copyright">© 2025 MOTO CENTER ΕΥΜΟΡΦΙΑΔΗΣ — ΚΟΡΙΝΘΟΣ</span>
      <div class="romans-footer__links">
        <a href="bikes.html" class="romans-footer__link">SHOWROOM</a>
        <a href="services.html" class="romans-footer__link">ΥΠΗΡΕΣΙΕΣ</a>
        <a href="contact.html" class="romans-footer__link">ΕΠΙΚΟΙΝΩΝΙΑ</a>
      </div>
    </div>
  </footer>

  <!-- Scripts -->
  <script src="js/data-service.js"></script>
  <script src="js/main.js"></script>
  <script>
    // Stock Page Logic with Working Filters
    let allBikes = [];
    let activeBrand = '';
    let activeCategory = '';

    // Render listings
    function renderListings(bikes) {
      const container = document.getElementById('listingsContainer');
      const countEl = document.getElementById('stockCount');

      if (countEl) {
        countEl.textContent = bikes.length + ' οχήματα διαθέσιμα';
      }

      if (!container) return;

      if (bikes.length === 0) {
        container.innerHTML = `
          <div class="no-results">
            ΔΕΝ ΒΡΕΘΗΚΑΝ ΑΠΟΤΕΛΕΣΜΑΤΑ
          </div>
        `;
        return;
      }

      container.innerHTML = bikes.map(bike => {
        // Handle both raw Airtable format and flattened data-service format
        const b = bike.fields || bike;

        // DEBUG: Log bike ID issues
        const bikeId = bike.id || b.id;
        if (!bikeId) {
          console.error('Missing ID for bike:', bike);
        } else {
          console.log('Bike ID generated:', bikeId);
        }

        const priceVal = b.Price || b.price;
        const price = priceVal
          ? '€' + Number(priceVal).toLocaleString('el-GR')
          : 'ΚΑΤΟΠΙΝ ΕΠΙΚΟΙΝΩΝΙΑΣ';

        // Handle images: could be array of objects (Airtable) or array of strings (data-service)
        let imageUrl = 'https://via.placeholder.com/600x400';
        const imgs = b.Images || b.images;
        if (imgs && imgs.length > 0) {
          if (typeof imgs[0] === 'string') {
            imageUrl = imgs[0];
          } else if (imgs[0].url) {
            imageUrl = imgs[0].url;
          }
        }

        const mileageVal = b.Mileage || b.mileage;
        const mileage = mileageVal
          ? Number(mileageVal).toLocaleString('el-GR') + ' km'
          : '0 km';

        const title = b.Title || b.title || 'Μοτοσυκλέτα';
        const year = b.Year || b.year || '';
        const color = b.Color || b.color || '';
        const engine = b.Engine_CC || b.engine_cc || '';

        // Generated Link
        const explicitLink = `bike-detail.html?id=${bikeId}`;

        // Navigation handler: Save ID to localStorage as fallback
        const navHandler = `
          event.preventDefault(); 
          localStorage.setItem('selectedBikeId', '${bikeId}');
          window.location.href = '${explicitLink}';
        `;

        return `
          <div class="listing-row">
            <a href="${explicitLink}" onclick="${navHandler}" class="listing-row__img-wrap">
              <img src="${imageUrl}" alt="${title}" class="listing-row__img" onerror="this.src='https://via.placeholder.com/600x400'"/>
            </a>
            <div class="listing-row__body">
              <div class="listing-row__header">
                <div>
                  <h2 class="listing-row__title">${title}</h2>
                </div>
                <span class="listing-row__price">${price}</span>
              </div>
              <div class="listing-row__divider"></div>
              <div class="listing-row__specs">
                ${year ? `
                <div class="listing-row__spec">
                  <span class="listing-row__spec-label">ΕΤΟΣ:</span>
                  <span class="listing-row__spec-value">${year}</span>
                </div>` : ''}
                ${color ? `
                <div class="listing-row__spec">
                  <span class="listing-row__spec-label">ΧΡΩΜΑ:</span>
                  <span class="listing-row__spec-value">${color}</span>
                </div>` : ''}
                <div class="listing-row__spec">
                  <span class="listing-row__spec-label">ΧΙΛΙΟΜΕΤΡΑ:</span>
                  <span class="listing-row__spec-value">${mileage}</span>
                </div>
                ${engine ? `
                <div class="listing-row__spec">
                  <span class="listing-row__spec-label">ΚΥΒΙΚΑ:</span>
                  <span class="listing-row__spec-value">${engine} cc</span>
                </div>` : ''}
              </div>
              <div class="listing-row__footer">
                <a href="${explicitLink}" onclick="${navHandler}" class="listing-row__cta">ΔΕΙΤΕ ΤΟ ΟΧΗΜΑ</a>
              </div>
            </div>
          </div>
          <div class="listing-row__separator"></div>
        `;
      }).join('');
    }

    // Apply filters
    function applyFilters() {
      let filtered = [...allBikes];

      if (activeBrand) {
        filtered = filtered.filter(b => {
          const brand = (b.fields?.Brand || b.brand || '').toLowerCase();
          return brand === activeBrand.toLowerCase();
        });
      }

      if (activeCategory) {
        filtered = filtered.filter(b => {
          const category = (b.fields?.Category || b.category || '').toLowerCase();
          return category === activeCategory.toLowerCase();
        });
      }

      renderListings(filtered);
    }

    // Update active link highlighting
    function updateActiveLinks() {
      document.querySelectorAll('.sidebar__link').forEach(link => {
        const filter = link.dataset.filter;
        const value = link.dataset.value;

        if (filter === 'brand') {
          link.classList.toggle('active', activeBrand === value);
        }
        if (filter === 'category') {
          link.classList.toggle('active', activeCategory === value);
        }
      });
    }

    // Sidebar click handlers
    document.querySelectorAll('.sidebar__link').forEach(link => {
      link.addEventListener('click', (e) => {
        e.preventDefault();
        const filter = link.dataset.filter;
        const value = link.dataset.value;

        if (filter === 'brand') {
          activeBrand = (activeBrand === value) ? '' : value;
        }
        if (filter === 'category') {
          activeCategory = (activeCategory === value) ? '' : value;
        }

        updateActiveLinks();
        applyFilters();
      });
    });

    // VIEW FULL STOCK LIST button
    const clearBtn = document.getElementById('clearFilters');
    if (clearBtn) {
      clearBtn.addEventListener('click', () => {
        activeBrand = '';
        activeCategory = '';
        updateActiveLinks();
        applyFilters();
      });
    }

    // Render sidebar latest arrivals
    function renderSidebarLatest(bikes) {
      const container = document.getElementById('sidebarLatest');
      if (!container) return;

      const latest = bikes.slice(0, 5); // Show more for context

      container.innerHTML = latest.map(bike => {
        // Flattened format from data-service
        const b = bike.fields || bike;

        const priceVal = b.Price || b.price;
        const price = priceVal
          ? '€' + Number(priceVal).toLocaleString('el-GR')
          : '';

        let imageUrl = 'https://via.placeholder.com/600x400';
        const imgs = b.Images || b.images;
        if (imgs && imgs.length > 0) {
          if (typeof imgs[0] === 'string') imageUrl = imgs[0];
          else if (imgs[0].url) imageUrl = imgs[0].url;
        }

        const title = b.Title || b.title || 'Μοτοσυκλέτα';
        const bikeId = bike.id || b.id;

        // Debug sidebar link issues
        if (!bikeId) console.error('Sidebar bike missing ID:', title);

        return `
          <a href="bike-detail.html?id=${bikeId}" class="sidebar__mini">
            <img src="${imageUrl}" alt="${title}" class="sidebar__mini-img" onerror="this.src='https://via.placeholder.com/600x400'"/>
            <div class="sidebar__mini-title">${title}</div>
            <div class="sidebar__mini-price">${price}</div>
          </a>
        `;
      }).join('');
    }

    // List/Grid view toggle
    function setupViewToggle() {
      const listBtn = document.getElementById('viewList');
      const gridBtn = document.getElementById('viewGrid');
      const container = document.getElementById('listingsContainer');

      if (!listBtn || !gridBtn || !container) return;

      listBtn.addEventListener('click', () => {
        container.classList.remove('grid-view');
        listBtn.classList.add('active');
        gridBtn.classList.remove('active');
      });

      gridBtn.addEventListener('click', () => {
        container.classList.add('grid-view');
        gridBtn.classList.add('active');
        listBtn.classList.remove('active');
      });
    }
  </script>
  <script>
    // Initial load
    async function initStockPage() {
      try {
        // Use the centralized data service (Airtable)
        allBikes = await window.fetchBikes();
        renderListings(allBikes);
        renderSidebarLatest(allBikes);
        setupViewToggle();
      } catch (err) {
        console.error('Failed to load bikes:', err);
        const container = document.getElementById('listingsContainer');
        if (container) {
          container.innerHTML = `<div class="no-results">Σφάλμα φόρτωσης. Δοκιμάστε ξανά.</div>`;
        }
      }
    }

    document.addEventListener('DOMContentLoaded', () => {
      initStockPage();
    });
  </script>
  <script src="js/main.js"></script>
</body>

</html>